{
  try {
    ByteBuffer b=ZipEncodingHelper.getZipEncoding(encoding).encode(name);
    byte[] result=new byte[b.limit()];
    System.arraycopy(b.array(),b.arrayOffset(),result,0,result.length);
    return result;
  }
 catch (  IOException ex) {
    throw new ZipException("Failed to encode name: " + ex.getMessage());
  }
}
