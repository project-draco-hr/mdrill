{
  boolean needhb=false;
  if (!neetRestart.get()) {
    if (!statcollect.getStat().equals(ShardsState.SERVICE)) {
      this.startJetty();
    }
 else {
      needhb=true;
    }
  }
 else {
    neetRestart.set(false);
    this.stopJetty();
    this.sync(false);
    this.startJetty();
  }
  this.statcollect.setLastTime(System.currentTimeMillis());
  if (needhb) {
    this.zkHeatbeat();
  }
}
