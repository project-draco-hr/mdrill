{
  if (!params.getBool(FacetParams.FACET,true))   return null;
  facetResponse=new SimpleOrderedMap();
  try {
    facetResponse.add("facet_queries",getFacetQueryCounts());
    facetResponse.add("facet_fields",getFacetFieldCounts());
    facetResponse.add("facet_dates",getFacetDateCounts());
    facetResponse.add("facet_ranges",getFacetRangeCounts());
  }
 catch (  Throwable e) {
    LOG.error("getFacetCounts",e);
    throw new SolrException(ErrorCode.SERVER_ERROR,e);
  }
  return facetResponse;
}
