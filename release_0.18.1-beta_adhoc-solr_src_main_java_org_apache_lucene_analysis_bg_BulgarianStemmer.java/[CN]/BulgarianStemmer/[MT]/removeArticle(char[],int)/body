{
  if (len > 6 && endsWith(s,len,"??????"))   return len - 3;
  if (len > 5) {
    if (endsWith(s,len,"????") || endsWith(s,len,"????") || endsWith(s,len,"????")|| endsWith(s,len,"????")|| endsWith(s,len,"????"))     return len - 2;
  }
  if (len > 4 && endsWith(s,len,"????"))   return len - 2;
  return len;
}
