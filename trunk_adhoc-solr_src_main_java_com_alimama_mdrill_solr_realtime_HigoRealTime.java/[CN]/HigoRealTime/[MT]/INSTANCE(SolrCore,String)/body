{
  HigoRealTime rtn=null;
  String key=core.getIndexDir(day);
  boolean isneedclean=false;
synchronized (instance) {
    if (!instance.contains(key)) {
      isneedclean=true;
    }
  }
  long t2=System.currentTimeMillis();
  if (isneedclean || t2 - t1 > 1000l * 3600) {
    try {
      cleanhistory(core);
    }
 catch (    IOException e) {
    }
    t1=t2;
  }
synchronized (instance) {
    rtn=instance.get(key);
    if (rtn == null || rtn.isstop()) {
      if (rtn != null) {
        rtn.stop();
      }
      rtn=new HigoRealTime(core,day);
      rtn.start();
      instance.put(key,rtn);
    }
  }
  return rtn;
}
