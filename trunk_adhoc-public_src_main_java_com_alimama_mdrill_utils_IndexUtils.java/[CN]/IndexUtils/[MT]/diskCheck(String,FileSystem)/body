{
  Path localpath=new Path(new Path(stopath,"higo"),"diskcheck");
  FileLock flout=null;
  RandomAccessFile out=null;
  FileChannel fcout=null;
  try {
    File file=new File(localpath.toString(),"lock");
    if (!file.exists()) {
      file.createNewFile();
    }
    out=new RandomAccessFile(file,"rw");
    fcout=out.getChannel();
    flout=fcout.lock();
    try {
      if (lfs.exists(localpath)) {
        lfs.delete(localpath,true);
      }
      lfs.mkdirs(localpath);
      File vfile=new File(localpath.toString(),"vertify");
      Long vertify=System.currentTimeMillis();
      DataOutputStream dos=new DataOutputStream(new FileOutputStream(vfile));
      dos.writeLong(vertify);
      dos.close();
      DataInputStream dis=new DataInputStream(new FileInputStream(vfile));
      Long readvertify=dis.readLong();
      dis.close();
      if (vertify.equals(readvertify)) {
        return true;
      }
    }
 catch (    IOException e) {
      return false;
    }
    return false;
  }
 catch (  Exception e) {
    return false;
  }
 finally {
    try {
      if (flout != null) {
        flout.release();
      }
      if (fcout != null) {
        fcout.close();
      }
      if (out != null) {
        out.close();
      }
      out=null;
    }
 catch (    Exception e) {
    }
  }
}
